var obj=$("#post-content");function doBB(a){var b=obj.getSelection(),c="["+a.data.code+(a.data.param?"="+a.data.param:"")+"]",d="[/"+a.data.code+"]",e=c.length,f=d.length;""==b.text?"apply"==a.data.do&&(obj.val(obj.val()+c+d),obj.focus(),obj.setSelection(obj.val().length-f)):"fill"==a.data.do?(obj.surroundSelectedText(c,d),obj.setSelection(b.start,b.start+b.length+f+e)):"remove"==a.data.do?(b.text=b.text.replace(c,""),b.text=b.text.replace(d,""),obj.replaceSelectedText(b.text),obj.setSelection(b.start,b.start+b.text.length)):"apply"==a.data.do&&(obj.collapseSelection(!1),obj.focus())}function makeEvent(a,b,c=""){$(a).on("mouseenter",{code:b,do:"fill",param:c},doBB),$(a).on("mouseleave",{code:b,do:"remove",param:c},doBB),$(a).on("click",{code:b,do:"apply",param:c},doBB)}var hexDigits=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function rgb2hex(a){return a=a.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),"#"+hex(a[1])+hex(a[2])+hex(a[3])}function hex(a){return isNaN(a)?"00":hexDigits[(a-a%16)/16]+hexDigits[a%16]}makeEvent("#bbimg","img"),makeEvent("#bbvid","video"),makeEvent("#bbspo","spoiler"),makeEvent("#bburl","url"),makeEvent("#bbb","b"),makeEvent("#bbcol","color"),makeEvent("#bbund","u"),makeEvent("#bbita","i"),makeEvent("#bbquo","quote"),makeEvent("#bbtch","t"),makeEvent("#bbtwt","tweet"),makeEvent("#bbcnt","center"),makeEvent("#bbrgt","right");for(let a,b=0;7>b;b++)a="#bbcol"+b.toString(),makeEvent(a,"color",rgb2hex($(a).css("color")));